<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>AMEP Leaderboard</title>
<script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
    </style>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#38faea",
                        "background-light": "#f5f8f8",
                        "background-dark": "#16213E",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "lg": "2rem",
                        "xl": "3rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
</head>
<body class="font-display">
<div class="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark bg-gradient-to-br from-[#1A1A2E] to-[#16213E] overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<div class="px-4 sm:px-10 md:px-20 lg:px-40 flex flex-1 justify-center py-5">
<div class="layout-content-container flex flex-col max-w-[960px] flex-1">
<!-- Header -->
        <header class="border-b border-indigo-500/20 backdrop-blur-sm bg-[#0F172A]/30">
            <div class="container mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="text-xl font-bold tracking-wide bg-gradient-to-r from-blue-500 via-indigo-500 to-teal-500 bg-clip-text text-transparent">
                        AMEP
                    </div>
                    <nav class="hidden md:flex space-x-6">
                        <a href="student-dashboard.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="dashboard">Dashboard</a>
                        <a href="mastery-tracker.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="mastery">Mastery Tracker</a>
                        <a href="assignments.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="assignments">Assignments</a>
                        <a href="projects.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="projects">Projects</a>
                        <a href="leaderboard.html" class="text-white font-medium nav-link" data-page="leaderboard">Leaderboard</a>
                        <a href="badges.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="badges">Badges</a>
                    </nav>
                    <div class="flex items-center space-x-4">
                        <button id="mobile-menu-toggle" class="md:hidden text-gray-400 hover:text-white focus:outline-none">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <span class="text-gray-300 hidden sm:inline" id="user-name">John Doe</span>
                        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center">
                            <span class="font-bold" id="user-initials">JD</span>
                        </div>
                        <a href="#" id="desktop-logout-btn" class="hidden md:block text-gray-300 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </header>
<main class="flex-1 p-4 sm:p-6">
<div class="flex flex-wrap justify-between items-center gap-4 mb-6">
<div class="flex min-w-72 flex-col gap-2">
<p class="text-white text-4xl font-black leading-tight tracking-[-0.033em]">AMEP Leaderboard</p>
<p class="text-gray-400 dark:text-[#A9B4C7] text-base font-normal leading-normal">See how you rank against other learners.</p>
</div>
</div>
<div class="flex gap-3 p-3 flex-wrap pr-4 mb-6">
<button class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-primary pl-4 pr-4 shadow-[0_0_15px_rgba(56,250,234,0.4)]">
<p class="text-background-dark text-sm font-bold leading-normal">All-Time</p>
</button>
<button class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors pl-4 pr-4">
<p class="text-white text-sm font-medium leading-normal">This Week</p>
</button>
<button class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors pl-4 pr-4">
<p class="text-white text-sm font-medium leading-normal">My Class</p>
</button>
<button class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors pl-4 pr-4">
<p class="text-white text-sm font-medium leading-normal">Pronunciation</p>
</button>
</div>
<div class="px-0 sm:px-4 py-3 @container">
<div class="flex flex-col gap-2">
<!-- Top 3 Performers -->
<div class="grid grid-cols-12 gap-4 px-4 py-3 text-left text-white/60 w-full text-sm font-medium leading-normal">
<div class="col-span-1">Rank</div>
<div class="col-span-5">Learner</div>
<div class="col-span-3 text-right">XP</div>
<div class="col-span-3 text-right">Streak</div>
</div>
<div class="flex flex-col gap-2">
<!-- 1st Place -->
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] border-2 border-primary shadow-[0_0_20px_rgba(56,250,234,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 font-bold text-lg text-yellow-300">1</div>
<div class="w-5/12 flex items-center gap-3">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="Avatar of Elara Vance" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBrVV5VyqKRXZIDQrBNtb5TtOSRXVDZiHQjrCL2OyXyQdzETJYIcd_nLzxnzhqmFiWHAwSLRAbUUgql-mW5A3LDgsqUBbmO4Q7qcmbza_4KhIY4JruyOn8-lBTIKPA8CVrGieL6AGJ94VbB60Zg6m5NUAKMttMrz9S7DGV9a_PdOllZ1QuVPyr4o3LicZkhEvQaesISIBCHO18_v6C0z6ASLnOS5cx6mKGhYyl2zHcBuEIWXDaeffNWciFDwgQrRArzOEv38vQhBqg");'></div>
<span class="text-white font-semibold">Elara Vance</span>
</div>
<div class="w-3/12 text-right font-semibold text-white" style="text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);">98,500</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right">
<span class="material-symbols-outlined text-orange-400" style="text-shadow: 0 0 10px rgba(251, 146, 60, 0.8);">local_fire_department</span>
<span class="text-white/80">120 days</span>
</div>
</div>
<!-- 2nd Place -->
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] border-2 border-primary/70 shadow-[0_0_15px_rgba(56,250,234,0.3)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 font-bold text-lg text-gray-300">2</div>
<div class="w-5/12 flex items-center gap-3">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="Avatar of Jax Orion" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAGRofiPpHVEv9MKR_lF2-yTAeQLFxyUTJCt9QBHYFZmQEyF8Ro1RoFe-KJ1h4u0Ny6TFCp36vzP8LSxsk9uz7lsbw1kYt1XD555gfLY3l5zd6XKwuJqLLoBRpAcE-1JtvHBJeoMKdMEOtV_TKLpw86gceDK35mKa8yUcYAr_eJCZIKPoU-Gm7fw80Yq_k-96FQA3vw7lNSQvkjn0TeQZyOTRNl-rQmGdcUXmTtSmKZOeGS6l4zXIEvKkkbRLhNstH7UWYX0Z_-rHo");'></div>
<span class="text-white font-semibold">Jax Orion</span>
</div>
<div class="w-3/12 text-right font-semibold text-white" style="text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);">95,200</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right">
<span class="material-symbols-outlined text-orange-400" style="text-shadow: 0 0 10px rgba(251, 146, 60, 0.8);">local_fire_department</span>
<span class="text-white/80">115 days</span>
</div>
</div>
<!-- 3rd Place -->
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] border-2 border-primary/50 shadow-[0_0_10px_rgba(56,250,234,0.2)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 font-bold text-lg text-yellow-600">3</div>
<div class="w-5/12 flex items-center gap-3">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="Avatar of Lyra Nova" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCuhrTe3dr52mJA0_jamw46Fcs887G_67gbZhcpHZW8GHk4qNXiiUfo_J7TocPtnlYeZ3HquXHPsehCQHxa_nmQ9JK8iOUk_xFKbbX2HuQBXn2c2sUEPcIm6QHmWBBbO8amOf2UD58gPqszh_gEe89hCVF8J-V45fHQ5hGKo7TacMmWi84oglsxen4rHZXoyjxSODGP30ONG0APk5crrcp9ZMUmFQcmt6ikiyCFXhuOJIPmfAE6RWdn-o-kQLgUANi02jd2vaLCtKY");'></div>
<span class="text-white font-semibold">Lyra Nova</span>
</div>
<div class="w-3/12 text-right font-semibold text-white" style="text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);">92,800</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right">
<span class="material-symbols-outlined text-orange-400" style="text-shadow: 0 0 10px rgba(251, 146, 60, 0.8);">local_fire_department</span>
<span class="text-white/80">112 days</span>
</div>
</div>
<!-- Other Ranks -->
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">4</div>
<div class="w-5/12 flex items-center gap-3 text-white">Zane Cygnus</div>
<div class="w-3/12 text-right text-gray-400">89,100</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">105 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">5</div>
<div class="w-5/12 flex items-center gap-3 text-white">Cora Nebula</div>
<div class="w-3/12 text-right text-gray-400">85,600</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">98 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">6</div>
<div class="w-5/12 flex items-center gap-3 text-white">Orion Pax</div>
<div class="w-3/12 text-right text-gray-400">82,300</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">95 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">7</div>
<div class="w-5/12 flex items-center gap-3 text-white">Seraphina Altair</div>
<div class="w-3/12 text-right text-gray-400">79,900</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">91 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">8</div>
<div class="w-5/12 flex items-center gap-3 text-white">Kaelen Draco</div>
<div class="w-3/12 text-right text-gray-400">77,400</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">88 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">9</div>
<div class="w-5/12 flex items-center gap-3 text-white">Rhea Vega</div>
<div class="w-3/12 text-right text-gray-400">75,100</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">85 days</div>
</div>
<div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
<div class="w-1/12 text-gray-400">10</div>
<div class="w-5/12 flex items-center gap-3 text-white">Titus Rigel</div>
<div class="w-3/12 text-right text-gray-400">72,800</div>
<div class="w-3/12 flex justify-end items-center gap-2 text-right text-gray-400">82 days</div>
</div>
</div>
</div>
</div>
<div class="flex items-center justify-center p-4 mt-6">
<a class="flex size-10 items-center justify-center text-white/50 hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">chevron_left</span>
</a>
<a class="text-sm font-bold leading-normal tracking-[0.015em] flex size-10 items-center justify-center text-background-dark rounded-full bg-primary" href="#">1</a>
<a class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors" href="#">2</a>
<a class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors" href="#">3</a>
<a class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors" href="#">4</a>
<a class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors" href="#">5</a>
<span class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/50">...</span>
<a class="text-sm font-normal leading-normal flex size-10 items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors" href="#">12</a>
<a class="flex size-10 items-center justify-center text-white/50 hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">chevron_right</span>
</a>
</div>
</main>
</div>
</div>
</div>
</div>

    <!-- Mobile Navigation Overlay -->
    <div id="mobile-nav-overlay" class="fixed inset-0 bg-black/80 z-50 hidden md:hidden">
        <div class="flex flex-col h-full">
            <div class="flex justify-between items-center p-6 border-b border-gray-800">
                <div class="text-xl font-bold bg-gradient-to-r from-blue-500 via-indigo-500 to-teal-500 bg-clip-text text-transparent">
                    AMEP
                </div>
                <button id="close-mobile-nav" class="text-gray-400 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <nav class="flex-col p-6 space-y-6">
                <a href="student-dashboard.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Dashboard</a>
                <a href="mastery-tracker.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Mastery Tracker</a>
                <a href="assignments.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Assignments</a>
                <a href="projects.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Projects</a>
                <a href="leaderboard.html" class="text-white font-medium text-lg py-2 border-l-4 border-blue-500 pl-4">Leaderboard</a>
                <a href="badges.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Badges</a>
                <div class="border-t border-gray-800 pt-6 mt-6">
                    <a href="#" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Settings</a>
                    <a href="#" id="logout-btn" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Logout</a>
                </div>
            </nav>
        </div>
    </div>
    
    <script>
        // Mobile navigation toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const closeMobileNav = document.getElementById('close-mobile-nav');
            const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileNavOverlay.classList.remove('hidden');
                });
            }
            
            if (closeMobileNav) {
                closeMobileNav.addEventListener('click', function() {
                    mobileNavOverlay.classList.add('hidden');
                });
            }
            
            // Close mobile menu when clicking on a link
            const mobileLinks = mobileNavOverlay.querySelectorAll('a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileNavOverlay.classList.add('hidden');
                });
            });
        });
    </script>
    
    <script type="module">
        // Import auth service
        import { logout } from '../src/services/auth.js';
        import { studentAPI } from '../src/services/api.js';
        
        // Add logout functionality for mobile
        document.getElementById('logout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('Are you sure you want to logout?')) {
                logout();
            }
        });
        
        // Add logout functionality for desktop
        const desktopLogoutBtn = document.getElementById('desktop-logout-btn');
        if (desktopLogoutBtn) {
            desktopLogoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    logout();
                }
            });
        }
        
        // Update user name display
        function updateUserNameDisplay() {
            // Get user name from localStorage
            const userName = localStorage.getItem('userName') || 'Student';
            
            // Update user name in header
            const userNameElement = document.getElementById('user-name');
            if (userNameElement) {
                userNameElement.textContent = userName;
            }
            
            // Update user initials
            const userInitialsElement = document.getElementById('user-initials');
            if (userInitialsElement) {
                const names = userName.split(' ');
                let initials = '';
                if (names.length > 1) {
                    initials = names[0].charAt(0) + names[names.length - 1].charAt(0);
                } else {
                    initials = names[0].charAt(0) + names[0].charAt(1) || 'ST';
                }
                userInitialsElement.textContent = initials.toUpperCase();
            }
        }
        
        // Fetch and display leaderboard data
        async function fetchLeaderboardData() {
            try {
                // Show loading state
                showLoadingState();
                
                // Fetch real data from backend
                const leaderboardData = await studentAPI.getLeaderboard();
                
                // Update the UI with real data
                updateLeaderboardDisplay(leaderboardData);
            } catch (error) {
                console.error('Error fetching leaderboard data:', error);
                // Fallback to showing no data
                updateLeaderboardDisplay([]);
            }
        }
        
        function showLoadingState() {
            // You can implement a loading state here if needed
        }
        
        function updateLeaderboardDisplay(leaderboardData) {
            // Get the container where leaderboard items are displayed
            const container = document.querySelector('.flex.flex-col.gap-2');
            
            // Clear existing content (keep the header row)
            const headerRow = container.firstElementChild;
            container.innerHTML = '';
            container.appendChild(headerRow);
            
            // If no data, show appropriate message
            if (!leaderboardData || leaderboardData.length === 0) {
                const noDataRow = document.createElement('div');
                noDataRow.className = 'text-center py-8 text-gray-400 col-span-full';
                noDataRow.textContent = 'No leaderboard data available yet. Complete assignments to earn XP and appear on the leaderboard.';
                container.appendChild(noDataRow);
                return;
            }
            
            // Add each leaderboard entry to the container
            leaderboardData.forEach((entry, index) => {
                // Determine rank styling
                let rankClass, rankText;
                if (index === 0) {
                    rankClass = 'text-yellow-300 font-bold text-lg';
                    rankText = '1';
                } else if (index === 1) {
                    rankClass = 'text-gray-300 font-bold text-lg';
                    rankText = '2';
                } else if (index === 2) {
                    rankClass = 'text-yellow-600 font-bold text-lg';
                    rankText = '3';
                } else {
                    rankClass = 'text-gray-400';
                    rankText = (index + 1).toString();
                }
                
                // Create the HTML for this leaderboard entry
                const entryHTML = `
                    <div class="flex items-center p-4 rounded-lg bg-[rgba(42,48,72,0.5)] backdrop-blur-sm hover:bg-[rgba(56,250,234,0.1)] transition-all duration-300">
                        <div class="w-1/12 ${rankClass}">${rankText}</div>
                        <div class="w-5/12 flex items-center gap-3">
                            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" 
                                style="background-image: url('${entry.avatar_url || 'https://placehold.co/100x100/4a5568/ffffff?text=User'}');">
                            </div>
                            <span class="text-white font-semibold">${entry.name}</span>
                        </div>
                        <div class="w-3/12 text-right font-semibold text-white">${entry.xp.toLocaleString()}</div>
                        <div class="w-3/12 flex justify-end items-center gap-2 text-right">
                            <span class="material-symbols-outlined text-orange-400">local_fire_department</span>
                            <span class="text-white/80">${entry.streak} days</span>
                        </div>
                    </div>
                `;
                
                // Add to container
                container.insertAdjacentHTML('beforeend', entryHTML);
            });
        }
        
        // Call the functions when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateUserNameDisplay();
            fetchLeaderboardData();
        });
    </script>
</body>
</html>
