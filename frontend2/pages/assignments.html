<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>AMEP Assignments List (Dark Mode)</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0df2df",
                        "background-light": "#f5f8f8",
                        "background-dark": "#102221",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "lg": "2rem",
                        "xl": "3rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .glow-teal { box-shadow: 0 0 10px 1px #0df2df; }
        .glow-blue { box-shadow: 0 0 10px 1px #58A6FF; }
        .glow-indigo { box-shadow: 0 0 10px 1px #A371F7; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    </style>
</head>
<body class="bg-background-dark font-display text-white">
<div class="min-h-screen bg-[#0B1120] text-white">
<!-- Header -->
<header class="border-b border-indigo-500/20 backdrop-blur-sm bg-[#0F172A]/30">
<div class="container mx-auto px-6 py-4">
<div class="flex justify-between items-center">
<div class="text-xl font-bold tracking-wide bg-gradient-to-r from-blue-500 via-indigo-500 to-teal-500 bg-clip-text text-transparent">
AMEP
</div>
<nav class="hidden md:flex space-x-6">
<a href="student-dashboard.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="dashboard">Dashboard</a>
<a href="mastery-tracker.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="mastery">Mastery Tracker</a>
<a href="assignments.html" class="text-white font-medium nav-link" data-page="assignments">Assignments</a>
<a href="projects.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="projects">Projects</a>
<a href="leaderboard.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="leaderboard">Leaderboard</a>
<a href="badges.html" class="text-gray-300 hover:text-white transition-colors nav-link" data-page="badges">Badges</a>
</nav>
<div class="flex items-center space-x-4">
<button id="mobile-menu-toggle" class="md:hidden text-gray-400 hover:text-white focus:outline-none">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
<span class="text-gray-300 hidden sm:inline" id="user-name">John Doe</span>
<div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center">
<span class="font-bold" id="user-initials">JD</span>
</div>
<a href="#" id="desktop-logout-btn" class="hidden md:block text-gray-300 hover:text-white transition-colors">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
</svg>
</a>
</div>
</div>
</div>
</header>
<!-- Main Content -->
<main class="container mx-auto px-6 py-12">
<div class="w-full max-w-7xl mx-auto flex flex-col gap-6">
<!-- PageHeading -->
<div class="flex flex-wrap justify-between items-center gap-4">
<div class="flex flex-col gap-2">
<h1 class="text-white text-4xl font-black leading-tight tracking-[-0.033em]">Assignments</h1>
<p class="text-[#8B949E] text-base font-normal leading-normal">Manage and track your AMEP coursework.</p>
</div>
<!-- SearchBar -->
<div class="w-full max-w-sm">
<label class="flex flex-col min-w-40 h-12">
<div class="flex w-full flex-1 items-stretch rounded-full h-full bg-[rgba(22,27,34,0.7)] border border-white/10 backdrop-blur-sm">
<div class="text-[#8B949E] flex items-center justify-center pl-4">
<span class="material-symbols-outlined">search</span>
</div>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-full text-white focus:outline-0 focus:ring-0 border-none bg-transparent h-full placeholder:text-[#8B949E] px-4 pl-2 text-base font-normal leading-normal" placeholder="Search assignments..." value=""/>
</div>
</label>
</div>
</div>
<!-- Chips -->
<div class="flex gap-3 pt-4 border-t border-white/10">
<button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full px-4 bg-primary text-[#0D1117] glow-teal">
<p class="text-sm font-medium leading-normal">All</p>
</button>
<button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full px-4 bg-[rgba(22,27,34,0.7)] hover:bg-white/20 transition-colors">
<p class="text-white text-sm font-medium leading-normal">In Progress</p>
</button>
<button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full px-4 bg-[rgba(22,27,34,0.7)] hover:bg-white/20 transition-colors">
<p class="text-white text-sm font-medium leading-normal">Submitted</p>
</button>
<button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full px-4 bg-[rgba(22,27,34,0.7)] hover:bg-white/20 transition-colors">
<p class="text-white text-sm font-medium leading-normal">Overdue</p>
</button>
</div>
<!-- Table -->
<div class="overflow-hidden rounded-lg border border-white/10 bg-[rgba(22,27,34,0.7)] backdrop-blur-sm">
<table class="w-full">
<thead>
<tr class="bg-black/20">
<th class="px-6 py-4 text-left text-xs font-medium text-[#8B949E] uppercase tracking-wider">Assignment Title</th>
<th class="px-6 py-4 text-left text-xs font-medium text-[#8B949E] uppercase tracking-wider">Course</th>
<th class="px-6 py-4 text-left text-xs font-medium text-[#8B949E] uppercase tracking-wider">Due Date</th>
<th class="px-6 py-4 text-left text-xs font-medium text-[#8B949E] uppercase tracking-wider">Status</th>
<th class="px-6 py-4 text-left text-xs font-medium text-[#8B949E] uppercase tracking-wider">Difficulty</th>
</tr>
</thead>
<tbody class="divide-y divide-white/10">
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white"><a href="assignment-details.html?id=1" class="hover:text-primary transition-colors">Chapter 3: Kinematics Problem Set</a></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Advanced Mechanics</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Oct 26, 2024</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">In Progress</td>
<td class="px-6 py-4 whitespace-nowrap text-sm">
<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#58A6FF]/20 text-[#58A6FF] glow-blue">Medium</span>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white"><a href="assignment-details.html?id=2" class="hover:text-primary transition-colors">Lab Report: The Pendulum</a></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Physics 101</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Oct 22, 2024</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Submitted</td>
<td class="px-6 py-4 whitespace-nowrap text-sm">
<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/20 text-primary glow-teal">Easy</span>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white"><a href="assignment-details.html?id=3" class="hover:text-primary transition-colors">Final Thesis Draft</a></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Research Methods</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Nov 15, 2024</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#ff7b72]">Overdue</td>
<td class="px-6 py-4 whitespace-nowrap text-sm">
<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#A371F7]/20 text-[#A371F7] glow-indigo">Hard</span>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white"><a href="assignment-details.html?id=4" class="hover:text-primary transition-colors">Essay: Quantum Entanglement</a></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Quantum Physics</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Nov 30, 2024</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Not Started</td>
<td class="px-6 py-4 whitespace-nowrap text-sm">
<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#A371F7]/20 text-[#A371F7] glow-indigo">Hard</span>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white"><a href="assignment-details.html?id=5" class="hover:text-primary transition-colors">Calculus II Problem Set 5</a></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Mathematics II</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">Nov 05, 2024</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">In Progress</td>
<td class="px-6 py-4 whitespace-nowrap text-sm">
<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/20 text-primary glow-teal">Easy</span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- Floating Action Button -->
<a href="submit-assignment.html" class="absolute bottom-8 right-8 w-16 h-16 bg-primary rounded-full flex items-center justify-center text-[#0D1117] glow-teal hover:scale-105 transition-transform">
<span class="material-symbols-outlined text-4xl" style="font-variation-settings: 'wght' 500;">add</span>
</a>
<!-- Mobile Navigation Overlay -->
<div id="mobile-nav-overlay" class="fixed inset-0 bg-black/80 z-50 hidden md:hidden">
<div class="flex flex-col h-full">
<div class="flex justify-between items-center p-6 border-b border-gray-800">
<div class="text-xl font-bold bg-gradient-to-r from-blue-500 via-indigo-500 to-teal-500 bg-clip-text text-transparent">
AMEP
</div>
<button id="close-mobile-nav" class="text-gray-400 hover:text-white">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
</svg>
</button>
</div>

<nav class="flex-col p-6 space-y-6">
<a href="student-dashboard.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Dashboard</a>
<a href="mastery-tracker.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Mastery Tracker</a>
<a href="assignments.html" class="text-white font-medium text-lg py-2 border-l-4 border-blue-500 pl-4">Assignments</a>
<a href="projects.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Projects</a>
<a href="leaderboard.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Leaderboard</a>
<a href="badges.html" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Badges</a>
<div class="border-t border-gray-800 pt-6 mt-6">
<a href="#" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Settings</a>
<a href="#" id="logout-btn" class="text-gray-400 hover:text-white text-lg py-2 transition-colors">Logout</a>
</div>
</nav>
</div>
</div>

<script>
// Mobile navigation toggle functionality
document.addEventListener('DOMContentLoaded', function() {
const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
const closeMobileNav = document.getElementById('close-mobile-nav');
const mobileNavOverlay = document.getElementById('mobile-nav-overlay');

if (mobileMenuToggle) {
mobileMenuToggle.addEventListener('click', function() {
mobileNavOverlay.classList.remove('hidden');
});
}

if (closeMobileNav) {
closeMobileNav.addEventListener('click', function() {
mobileNavOverlay.classList.add('hidden');
});
}

// Close mobile menu when clicking on a link
const mobileLinks = mobileNavOverlay.querySelectorAll('a');
mobileLinks.forEach(link => {
link.addEventListener('click', function() {
mobileNavOverlay.classList.add('hidden');
});
});

// Highlight active nav link
function highlightActiveNavLink() {
const currentPage = window.location.pathname.split('/').pop();
const navLinks = document.querySelectorAll('.nav-link');

navLinks.forEach(link => {
link.classList.remove('text-white', 'font-medium');
link.classList.add('text-gray-300');

// Map pages to their respective nav items
const pageMap = {
'student-dashboard.html': 'dashboard',
'mastery-tracker.html': 'mastery',
'assignments.html': 'assignments',
'assignment-details.html': 'assignments',
'projects.html': 'projects',
'project-details.html': 'projects',
'leaderboard.html': 'leaderboard',
'badges.html': 'badges'
};

const pageKey = pageMap[currentPage];
if (link.getAttribute('data-page') === pageKey) {
link.classList.remove('text-gray-300');
link.classList.add('text-white', 'font-medium');
}
});
}

// Call on page load
highlightActiveNavLink();
});
</script>

<script type="module">
// Import auth service
import { logout } from '../src/services/auth.js';
import { studentAPI } from '../src/services/api.js';

// Add logout functionality
const logoutBtn = document.getElementById('logout-btn');
if (logoutBtn) {
    logoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('Are you sure you want to logout?')) {
            logout();
        }
    });
}

// Add logout functionality for desktop
const desktopLogoutBtn = document.getElementById('desktop-logout-btn');
if (desktopLogoutBtn) {
    desktopLogoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('Are you sure you want to logout?')) {
            logout();
        }
    });
}
</script>

<script>
// Update user name display
document.addEventListener('DOMContentLoaded', function() {
    updateUserNameDisplay();
});

function updateUserNameDisplay() {
    // Get user name from localStorage
    const userName = localStorage.getItem('userName') || 'Student';
    
    // Update user name in header
    const userNameElement = document.getElementById('user-name');
    if (userNameElement) {
        userNameElement.textContent = userName;
    }
    
    // Update user initials
    const userInitialsElement = document.getElementById('user-initials');
    if (userInitialsElement) {
        const names = userName.split(' ');
        let initials = '';
        if (names.length > 1) {
            initials = names[0].charAt(0) + names[names.length - 1].charAt(0);
        } else {
            initials = names[0].charAt(0) + names[0].charAt(1) || 'ST';
        }
        userInitialsElement.textContent = initials.toUpperCase();
    }
}

// Fetch and display assignments data
async function fetchAssignmentsData() {
    try {
        // Show loading state
        showLoadingState();
        
        // Get student ID from localStorage (assuming it's stored during login)
        const studentId = parseInt(localStorage.getItem('studentId')) || 1;
        
        // Fetch real data from backend
        const assignmentsData = await studentAPI.getAssignments(studentId);
        
        // Update the UI with real data
        updateAssignmentsDisplay(assignmentsData);
    } catch (error) {
        console.error('Error fetching assignments data:', error);
        // Fallback to showing no data
        updateAssignmentsDisplay([]);
    }
}

function showLoadingState() {
    // You can implement a loading state here if needed
}

function updateAssignmentsDisplay(assignmentsData) {
    // Get the table body
    const tbody = document.querySelector('tbody');
    
    // Clear existing content
    tbody.innerHTML = '';
    
    // If no data, show appropriate message
    if (!assignmentsData || assignmentsData.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="5" class="px-6 py-4 text-center text-gray-400">
                    No assignments available yet. Check back later for new assignments.
                </td>
            </tr>
        `;
        return;
    }
    
    // Add each assignment to the table
    assignmentsData.forEach((assignment, index) => {
        // Determine status and difficulty classes
        let statusClass, statusText;
        if (assignment.status === 'completed') {
            statusClass = 'text-[#3fb950]';
            statusText = 'Completed';
        } else if (assignment.due_date && new Date(assignment.due_date) < new Date()) {
            statusClass = 'text-[#ff7b72]';
            statusText = 'Overdue';
        } else {
            statusClass = 'text-[#8B949E]';
            statusText = 'Not Started';
        }
        
        let difficultyClass, difficultyText;
        if (assignment.difficulty === 'hard') {
            difficultyClass = 'bg-[#A371F7]/20 text-[#A371F7]';
            difficultyText = 'Hard';
        } else if (assignment.difficulty === 'medium') {
            difficultyClass = 'bg-[#79c0ff]/20 text-[#79c0ff]';
            difficultyText = 'Medium';
        } else {
            difficultyClass = 'bg-primary/20 text-primary';
            difficultyText = 'Easy';
        }
        
        // Format due date
        const dueDate = assignment.due_date ? new Date(assignment.due_date).toLocaleDateString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric'
        }) : 'N/A';
        
        // Create the HTML for this assignment
        const assignmentHTML = `
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">
                    <a href="assignment-details.html?id=${assignment.id}" class="hover:text-primary transition-colors">
                        ${assignment.title}
                    </a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">${assignment.subject || 'General'}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-[#8B949E]">${dueDate}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm ${statusClass}">${statusText}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${difficultyClass}">
                        ${difficultyText}
                    </span>
                </td>
            </tr>
        `;
        
        // Add to table
        tbody.insertAdjacentHTML('beforeend', assignmentHTML);
    });
}

// Call the function when page loads
document.addEventListener('DOMContentLoaded', function() {
    fetchAssignmentsData();
});
</script>

</main>
</div>
</body></html>